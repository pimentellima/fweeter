{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { AuthContext } from \"../../contexts/authContext\";\nimport { followUser, getFollowedById, unfollowUser } from \"../../services/follow\";\nimport { getUserByUrl } from \"../../services/user\";\nimport { getUserPostsById } from \"../../services/posts\";\nexport const useUserProfile = () => {\n  _s();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [posts, setPosts] = useState([]);\n  const [user, setUser] = useState();\n  const location = useLocation();\n  const [followed, setFollowed] = useState(false);\n  useEffect(() => {\n    if (!user) {\n      fetchUser();\n    } else {\n      fetchPosts();\n      fetchFollow();\n    }\n  }, [user]);\n  const fetchFollow = async () => {\n    const followedUsers = await getFollowedById(user.id);\n    followedUsers.forEach(item => {\n      if (item.follower_user_id === currentUser.id) {\n        setFollowed(true);\n      }\n    });\n  };\n  const fetchPosts = async () => {\n    const posts = await getUserPostsById(user.id);\n    setPosts(posts);\n  };\n  const handleFollow = async () => {\n    followed ? unfollowUser(user.id, currentUser.id).then(() => setFollowed(false)) : followUser(user.id, currentUser.id).then(() => setFollowed(true));\n  };\n  const fetchUser = async () => {\n    const users = await getUserByUrl(location.pathname);\n    setUser(users);\n  };\n  return {\n    followed,\n    handleFollow,\n    user,\n    posts\n  };\n};\n_s(useUserProfile, \"xusrcdCrmqAT7iKgC6z99FhTTaE=\", false, function () {\n  return [useLocation];\n});","map":{"version":3,"names":["useContext","useEffect","useState","useLocation","AuthContext","followUser","getFollowedById","unfollowUser","getUserByUrl","getUserPostsById","useUserProfile","currentUser","posts","setPosts","user","setUser","location","followed","setFollowed","fetchUser","fetchPosts","fetchFollow","followedUsers","id","forEach","item","follower_user_id","handleFollow","then","users","pathname"],"sources":["C:/Users/mathe/OneDrive/Documentos/vsc/fwitter/client/src/modules/user/useUserProfile.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../contexts/authContext\";\r\nimport { followUser, getFollowedById, unfollowUser } from \"../../services/follow\";\r\nimport { getUserByUrl } from \"../../services/user\";\r\nimport { getUserPostsById } from \"../../services/posts\";\r\n\r\nexport const useUserProfile = () => {\r\n    const { currentUser } = useContext(AuthContext);\r\n    const [posts, setPosts] = useState([]);\r\n    const [user, setUser] = useState();\r\n    const location = useLocation();\r\n    const [followed, setFollowed] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if(!user) {\r\n            fetchUser();\r\n        }\r\n        else {\r\n            fetchPosts();\r\n            fetchFollow();\r\n        }\r\n    }, [user]);\r\n\r\n    const fetchFollow = async() => {\r\n        const followedUsers = await getFollowedById(user.id);\r\n        followedUsers.forEach((item) => {\r\n            if(item.follower_user_id === currentUser.id) {\r\n                setFollowed(true);\r\n            } \r\n        })\r\n    }\r\n    \r\n    const fetchPosts = async () => {\r\n        const posts = await getUserPostsById(user.id);\r\n        setPosts(posts);\r\n    }\r\n\r\n    const handleFollow = async() => {\r\n        followed ? \r\n            unfollowUser(user.id, currentUser.id).\r\n            then(() => setFollowed(false))\r\n        :\r\n            followUser(user.id, currentUser.id).\r\n            then(() => setFollowed(true))\r\n    }\r\n\r\n    const fetchUser = async() => {\r\n        const users = await getUserByUrl(location.pathname);\r\n        setUser(users);\r\n    }\r\n\r\n    return { followed, handleFollow, user, posts }\r\n}"],"mappings":";AAAA,SAASA,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACvD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,UAAU,EAAEC,eAAe,EAAEC,YAAY,QAAQ,uBAAuB;AACjF,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,gBAAgB,QAAQ,sBAAsB;AAEvD,OAAO,MAAMC,cAAc,GAAG,MAAM;EAAA;EAChC,MAAM;IAAEC;EAAY,CAAC,GAAGX,UAAU,CAACI,WAAW,CAAC;EAC/C,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,EAAE;EAClC,MAAMc,QAAQ,GAAGb,WAAW,EAAE;EAC9B,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAE/CD,SAAS,CAAC,MAAM;IACZ,IAAG,CAACa,IAAI,EAAE;MACNK,SAAS,EAAE;IACf,CAAC,MACI;MACDC,UAAU,EAAE;MACZC,WAAW,EAAE;IACjB;EACJ,CAAC,EAAE,CAACP,IAAI,CAAC,CAAC;EAEV,MAAMO,WAAW,GAAG,YAAW;IAC3B,MAAMC,aAAa,GAAG,MAAMhB,eAAe,CAACQ,IAAI,CAACS,EAAE,CAAC;IACpDD,aAAa,CAACE,OAAO,CAAEC,IAAI,IAAK;MAC5B,IAAGA,IAAI,CAACC,gBAAgB,KAAKf,WAAW,CAACY,EAAE,EAAE;QACzCL,WAAW,CAAC,IAAI,CAAC;MACrB;IACJ,CAAC,CAAC;EACN,CAAC;EAED,MAAME,UAAU,GAAG,YAAY;IAC3B,MAAMR,KAAK,GAAG,MAAMH,gBAAgB,CAACK,IAAI,CAACS,EAAE,CAAC;IAC7CV,QAAQ,CAACD,KAAK,CAAC;EACnB,CAAC;EAED,MAAMe,YAAY,GAAG,YAAW;IAC5BV,QAAQ,GACJV,YAAY,CAACO,IAAI,CAACS,EAAE,EAAEZ,WAAW,CAACY,EAAE,CAAC,CACrCK,IAAI,CAAC,MAAMV,WAAW,CAAC,KAAK,CAAC,CAAC,GAE9Bb,UAAU,CAACS,IAAI,CAACS,EAAE,EAAEZ,WAAW,CAACY,EAAE,CAAC,CACnCK,IAAI,CAAC,MAAMV,WAAW,CAAC,IAAI,CAAC,CAAC;EACrC,CAAC;EAED,MAAMC,SAAS,GAAG,YAAW;IACzB,MAAMU,KAAK,GAAG,MAAMrB,YAAY,CAACQ,QAAQ,CAACc,QAAQ,CAAC;IACnDf,OAAO,CAACc,KAAK,CAAC;EAClB,CAAC;EAED,OAAO;IAAEZ,QAAQ;IAAEU,YAAY;IAAEb,IAAI;IAAEF;EAAM,CAAC;AAClD,CAAC;AAAA,GA9CYF,cAAc;EAAA,QAINP,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}