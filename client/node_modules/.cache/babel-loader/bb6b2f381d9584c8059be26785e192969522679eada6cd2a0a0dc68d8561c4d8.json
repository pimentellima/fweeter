{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useContext, useState, useEffect } from \"react\";\nimport { AuthContext } from \"../../contexts/authContext\";\nimport { getFollowedById } from \"./getFollowedById\";\nimport axios from \"axios\";\nexport const useFollow = user => {\n  _s();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [followed, setFollowed] = useState(false);\n  useEffect(() => {\n    if (user) {\n      fetchFollow();\n    }\n  }, [user]);\n  const fetchFollow = async () => {\n    const followedUsers = await getFollowedById(user.Id);\n    followedUsers.forEach(item => {\n      if (item.follower_user_id === currentUser.id) {\n        setFollowed(true);\n      }\n    });\n  };\n  const handleFollow = async () => {\n    try {\n      followed ? axios.delete('//localhost:5000/follow', {\n        data: {\n          follower_user_id: currentUser.id,\n          followed_user_id: user\n        }\n      }).then(() => setFollowed(false)) : axios.post('//localhost:5000/follow', {\n        follower_user_id: currentUser.id,\n        followed_user_id: user\n      }).then(() => setFollowed(true));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return {\n    followed,\n    handleFollow\n  };\n};\n_s(useFollow, \"AKbnSdj3JZuz2vdLfia0p0/IPdE=\");","map":{"version":3,"names":["useContext","useState","useEffect","AuthContext","getFollowedById","axios","useFollow","user","currentUser","followed","setFollowed","fetchFollow","followedUsers","Id","forEach","item","follower_user_id","id","handleFollow","delete","data","followed_user_id","then","post","err","console","error"],"sources":["C:/Users/mathe/OneDrive/Documentos/vsc/fwitter/client/src/modules/user/useFollow.js"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\"\r\nimport { AuthContext } from \"../../contexts/authContext\"\r\nimport { getFollowedById } from \"./getFollowedById\";\r\nimport axios from \"axios\";\r\n\r\nexport const useFollow = (user) => {\r\n    const { currentUser } = useContext(AuthContext);\r\n    const [followed, setFollowed] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if(user) {\r\n            fetchFollow();\r\n        }\r\n    }, [user])\r\n\r\n    const fetchFollow = async() => {\r\n        const followedUsers = await getFollowedById(user.Id);\r\n        followedUsers.forEach((item) => {\r\n            if(item.follower_user_id === currentUser.id) {\r\n                setFollowed(true);\r\n            } \r\n        })\r\n\r\n    }\r\n \r\n    const handleFollow = async() => {\r\n        try {\r\n            followed ? \r\n                axios.delete('//localhost:5000/follow', {\r\n                    data: {\r\n                        follower_user_id: currentUser.id,\r\n                        followed_user_id: user\r\n                    }\r\n                }).then(() => setFollowed(false))\r\n            :\r\n                axios.post('//localhost:5000/follow', {\r\n                    follower_user_id: currentUser.id,\r\n                    followed_user_id: user\r\n                }).then(() => setFollowed(true))\r\n        } catch(err) {\r\n            console.error(err);\r\n        }\r\n    }\r\n\r\n    return { followed, handleFollow }\r\n}"],"mappings":";AAAA,SAASA,UAAU,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACvD,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,eAAe,QAAQ,mBAAmB;AACnD,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,SAAS,GAAIC,IAAI,IAAK;EAAA;EAC/B,MAAM;IAAEC;EAAY,CAAC,GAAGR,UAAU,CAACG,WAAW,CAAC;EAC/C,MAAM,CAACM,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAE/CC,SAAS,CAAC,MAAM;IACZ,IAAGK,IAAI,EAAE;MACLI,WAAW,EAAE;IACjB;EACJ,CAAC,EAAE,CAACJ,IAAI,CAAC,CAAC;EAEV,MAAMI,WAAW,GAAG,YAAW;IAC3B,MAAMC,aAAa,GAAG,MAAMR,eAAe,CAACG,IAAI,CAACM,EAAE,CAAC;IACpDD,aAAa,CAACE,OAAO,CAAEC,IAAI,IAAK;MAC5B,IAAGA,IAAI,CAACC,gBAAgB,KAAKR,WAAW,CAACS,EAAE,EAAE;QACzCP,WAAW,CAAC,IAAI,CAAC;MACrB;IACJ,CAAC,CAAC;EAEN,CAAC;EAED,MAAMQ,YAAY,GAAG,YAAW;IAC5B,IAAI;MACAT,QAAQ,GACJJ,KAAK,CAACc,MAAM,CAAC,yBAAyB,EAAE;QACpCC,IAAI,EAAE;UACFJ,gBAAgB,EAAER,WAAW,CAACS,EAAE;UAChCI,gBAAgB,EAAEd;QACtB;MACJ,CAAC,CAAC,CAACe,IAAI,CAAC,MAAMZ,WAAW,CAAC,KAAK,CAAC,CAAC,GAEjCL,KAAK,CAACkB,IAAI,CAAC,yBAAyB,EAAE;QAClCP,gBAAgB,EAAER,WAAW,CAACS,EAAE;QAChCI,gBAAgB,EAAEd;MACtB,CAAC,CAAC,CAACe,IAAI,CAAC,MAAMZ,WAAW,CAAC,IAAI,CAAC,CAAC;IACxC,CAAC,CAAC,OAAMc,GAAG,EAAE;MACTC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;IACtB;EACJ,CAAC;EAED,OAAO;IAAEf,QAAQ;IAAES;EAAa,CAAC;AACrC,CAAC;AAAA,GAxCYZ,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}